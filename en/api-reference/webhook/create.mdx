---
title: "Create Webhook"
description: "Create a new webhook endpoint to receive notifications."
---

## Endpoint

```bash
POST https://pay.sandbox.yabetoopay.com/v1/account/{accountId}/webhooks   # Sandbox
POST https://pay.api.yabetoopay.com/v1/account/{accountId}/webhooks       # Production
```

## Authentication

Use your secret key in the `Authorization` header:

```bash
Authorization: Bearer YOUR_SECRET_KEY
```

## Path Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `accountId` | `string` | Your account ID |

## Request Body

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `url` | `string` | Yes | Webhook endpoint URL |
| `description` | `string` | No | Description of the webhook |
| `enabled_events` | `array` | Yes | List of events to receive |
| `metadata` | `object` | No | Custom data |

## Example Request

```javascript
const response = await fetch(
  "https://pay.sandbox.yabetoopay.com/v1/account/YOUR_ACCOUNT_ID/webhooks",
  {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer YOUR_SECRET_KEY",
    },
    body: JSON.stringify({
      url: "https://example.com/webhooks",
      description: "Production webhook",
      enabled_events: [
        "intent.completed",
        "disbursement.completed"
      ],
      metadata: {
        environment: "production",
      },
    }),
  }
);

const data = await response.json();
```

## Response

### 200 OK

```json
{
  "id": "whk_123456789",
  "object": "webhook",
  "url": "https://example.com/webhooks",
  "description": "Production webhook",
  "status": "active",
  "secret": "whsec_XXXXXXXXXXXXXXXXXXXXXXXX",
  "enabled_events": [
    "intent.completed",
    "disbursement.completed"
  ],
  "metadata": {
    "environment": "production"
  },
  "created_at": "2023-05-12T10:12:32Z"
}
```

### Available Events

| Event | Description |
|-------|-------------|
| `intent.completed` | Payment successfully received |
| `disbursement.completed` | Disbursement successfully processed |

### 400 Bad Request

```json
{
  "errors": [
    {
      "rule": "required",
      "field": "url",
      "message": "required validation failed"
    }
  ]
}
```

### 401 Unauthorized

```json
{
  "message": "Unauthorized"
}
```

<Note>
  Keep the webhook `secret` safe. It is required to verify
  the authenticity of received notifications.
</Note>
