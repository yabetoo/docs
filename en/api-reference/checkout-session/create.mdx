---
title: "Create Checkout Session"
description: "Create a new checkout session to accept payments."
---

## Endpoint

```bash
POST https://buy.api.yabetoopay.com/v1/sessions
```

## Authentication

Use your secret key in the `Authorization` header:

```bash
Authorization: Bearer YOUR_SECRET_KEY
```

## Request Body

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `total` | `number` | Yes | Total amount in the smallest currency unit (e.g., 200000 = 200,000 XAF) |
| `currency` | `string` | Yes | Currency code (e.g., `xaf`, `xof`) |
| `accountId` | `string` | Yes | Your Yabetoo account ID |
| `successUrl` | `string` | Yes | URL to redirect after successful payment |
| `cancelUrl` | `string` | Yes | URL to redirect if payment is cancelled |
| `items` | `array` | No | List of items being purchased |
| `metadata` | `object` | No | Custom key-value data for your reference |

### Item structure

```json
{
  "productId": "prod_12345",
  "productName": "HD Screen",
  "quantity": 1,
  "price": 200000
}
```

## Example Request

```javascript
const response = await fetch("https://buy.api.yabetoopay.com/v1/sessions", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: "Bearer YOUR_SECRET_KEY",
  },
  body: JSON.stringify({
    total: 200000,
    currency: "xaf",
    accountId: "acct_xxxxxxxx",
    successUrl: "https://your-site.com/checkout-success",
    cancelUrl: "https://your-site.com/checkout-cancel",
    metadata: { orderId: "1234" },
    items: [
      {
        productId: "prod_12345",
        quantity: 1,
        price: 200000,
        productName: "HD Screen",
      },
    ],
  }),
});

const data = await response.json();
```

## Response

### 200 OK

```json
{
  "accountId": "acct_iNXIGeot1lqyhGI5eP7KL0LcWTCTgFLytfRa",
  "successUrl": "https://your-site.com/checkout-success",
  "cancelUrl": "https://your-site.com/checkout-cancel",
  "orderId": "ord_KowaIWyMlD25Lhb8MyY3GQyvN8nFaxTZ7ji7",
  "expiresAt": "2024-05-28T13:33:51.760+00:00",
  "id": "session_ajrw3pQUUZD8UI2eFkWyUgLxJ4kGuXCoaQeb",
  "createdAt": "2024-05-28T12:33:51.762+00:00",
  "updatedAt": "2024-05-28T12:33:51.762+00:00"
}
```

### 400 Bad Request

```json
{
  "errors": [
    {
      "rule": "required",
      "field": "currency",
      "message": "required validation failed"
    }
  ]
}
```

### 401 Unauthorized

```json
{
  "message": "Unauthorized"
}
```
