---
title: "Confirmer une intention de paiement"
description: "Confirmez une intention de paiement pour traiter le paiement."
---

## Endpoint

```bash
POST https://pay.sandbox.yabetoopay.com/v1/payment-intents   # Sandbox
POST https://pay.api.yabetoopay.com/v1/payment-intents       # Production
```

## Authentification

Utilisez votre clé secrète dans l'en-tête `Authorization` :

```bash
Authorization: Bearer YOUR_SECRET_KEY
```

## Corps de la requête

| Paramètre | Type | Obligatoire | Description |
|-----------|------|-------------|-------------|
| `client_secret` | `string` | Oui | Le secret client de l'intention de paiement |
| `first_name` | `string` | Non | Prénom du client |
| `last_name` | `string` | Non | Nom du client |
| `receipt_email` | `string` | Non | Adresse email du client |
| `payment_method_data` | `object` | Oui | Détails de la méthode de paiement |

### Structure payment_method_data

```json
{
  "type": "momo",
  "momo": {
    "country": "cg",
    "msisdn": "+242123456789",
    "operator_name": "mtn"
  }
}
```

| Champ | Description |
|-------|-------------|
| `type` | Type de méthode de paiement (`momo` pour Mobile Money) |
| `momo.country` | Code pays (ex: `cg`, `cm`) |
| `momo.msisdn` | Numéro de téléphone au format international |
| `momo.operator_name` | Nom de l'opérateur (`mtn`, `airtel`) |

## Exemple de requête

```javascript
const response = await fetch(
  "https://pay.sandbox.yabetoopay.com/v1/payment-intents",
  {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer YOUR_SECRET_KEY",
    },
    body: JSON.stringify({
      client_secret: "YOUR_CLIENT_SECRET",
      first_name: "Jean",
      last_name: "Dupont",
      receipt_email: "jean.dupont@example.com",
      payment_method_data: {
        type: "momo",
        momo: {
          country: "cg",
          msisdn: "+242123456789",
          operator_name: "mtn",
        },
      },
    }),
  }
);

const data = await response.json();
```

## Réponse

### 200 OK

```json
{
  "intent_id": "pi_9aATHBv8UXuD6H5qrSav",
  "financial_transaction_id": "832546449",
  "transaction_id": "3c043d55-e659-4a86-9fab-b377fea9ee6b",
  "amount": 500,
  "currency": "xaf",
  "status": "succeeded",
  "captured": true,
  "external_id": "ext_3rxAagDtTSlN9XO96R1slJk14WENvxOlJbCu",
  "id": "ch_1jro7CEishIEWadybzlm"
}
```

### 422 Bad Request

```json
{
  "error": {
    "message": "E_CONFIRMED_INTENT_EXCEPTION: Intent already confirmed",
    "code": "E_CONFIRMED_INTENT_EXCEPTION"
  }
}
```

### 401 Unauthorized

```json
{
  "error": {
    "message": "Unauthorized",
    "code": "Unauthorized"
  }
}
```

<Warning>
  La gestion des erreurs est importante, car la confirmation peut échouer pour diverses raisons
  (fonds insuffisants, informations de paiement incorrectes, etc.).
</Warning>
